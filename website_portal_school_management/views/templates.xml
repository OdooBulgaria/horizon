<?xml version="1.0" encoding="utf-8" ?>
<!--
##############################################################################
#
#    Copyright (c) 2015 be-cloud.be
#                       Jerome Sonnet <jerome.sonnet@be-cloud.be>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Affero General Public License as
#    published by the Free Software Foundation, either version 3 of the
#    License, or (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Affero General Public License for more details.
#
#    You should have received a copy of the GNU Affero General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
##############################################################################
-->
<odoo>

    <template id="assets_frontend" inherit_id="website.assets_frontend" name="Shop Product Options">
        <xpath expr="." position="inside">
            <!--<script type="text/javascript" src="/website_sale_options/static/src/js/website_sale.test.js"></script>
            <script type="text/javascript" src="/website_sale_options/static/src/js/website_sale.js"></script>-->
            <link rel='stylesheet' href='/website_portal_school_management/static/src/css/portal_school.css' />
        </xpath>
    </template>

    <template id="school_bloc" name="Bloc">
        <div class="col-md-12">
            <table class="table table-condensed oe_school_program_table">
                <caption style="font-size: 100%;">Grille du bloc - <t t-esc="bloc.name"/></caption>
                <colgroup>
                    <col style="width:75px"/>
                    <col style="width:100%"/>
                    <col style="width:60px"/>
                    <col style="width:60px"/>
                    <col style="width:60px"/>
                    <col style="width:100px"/>
                    <col style="width:100px"/>
                    <col style="width:100px"/>
                </colgroup>
                <thead>
                    <tr>
                        <th>Code UE</th> 
                        <th>Unités d’enseignement</th> 
                        <th class="text-center">Heures</th> 
                        <th class="text-center">ECTS</th>
                        <th class="text-center">Pond</th>
                        <th>Pré/Co-requis</th>
                        <th>Quadrimestre</th>
                        <th>Référentiel</th>
                    </tr> 
                </thead>
                <tbody>
                    <t t-foreach="bloc.course_group_ids" t-as="course_group">
                    <tr class="oe_school_course_group">
                        <td><t t-esc="course_group.code_ue"/></td>
                        <td><t t-esc="course_group.name"/></td>
                        <td class="text-center"><t t-esc="course_group.total_hours"/></td>
                        <td class="text-center"><t t-esc="course_group.total_credits"/></td>
                        <td></td>
                        <td class="text-center">Aucun</td>
                        <td></td>
                        <td></td>
                    </tr>
                    <tr t-foreach="course_group.course_ids" t-as="course">
                        <td></td>
                        <td><t t-esc="course.name"/></td>
                        <td class="text-center"><t t-esc="course.hours"/></td>
                        <td class="text-center"><t t-esc="course.credits"/></td>
                        <td class="text-center"><t t-esc="course.weight"/></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                    </t>
                    <tr>
                        <td></td>
                        <td class="text-right">Total :</td>
                        <td class="text-center"><t t-esc="bloc.total_hours"/></td>
                        <td class="text-center"><t t-esc="bloc.total_credits"/></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </template>

    <template id="information" name="Information">
        <t t-call="website.layout">
            <t t-set="title">Information</t>
            <div class="oe_structure">
                <div class="container">
                    <div class="row">
                        <div id="o_my_information" class="col-md-12">
                            <div class="o_my_details">
                                <h3 class="page-header">Your Personal Details</h3>
                                <div t-field="user.partner_id" t-field-options='{"widget": "contact", "fields": ["email", "phone", "mobile", "address", "name"]}' />
                            </div>
                        </div>
                    </div>
                    <div class="row" t-if="bloc">
                        <div class="col-md-12">
                            <h3 class="page-header">Your Personal Program</h3>
                        </div>
                        <t t-call="website_portal_school_management.school_bloc"/>
                    </div>
                </div>
            </div>
        </t>
    </template>

    <template id="my_info_link" name="Link to user informations" inherit_id="website.layout">
        <xpath expr="//li[@id='o_logout']" position="before">
            <li><a href="/my/info" role="menuitem">My Information</a></li>
        </xpath>
    </template>

    <template id="program" name="Programs">
        <t t-call="website.layout">
            <t t-set="title">Programs</t>
            <div class="oe_structure">
                <div class="container">
                    <div class="row text-center">
                        <h2>Programs</h2>
                    </div>
                    <div class="oe_structure" />
                    <div class="row">
                        <t t-set="p" t-value="False"/>
                        <t t-foreach="programs" t-as="program">
                            <t t-if="p != program.domain_id"> 
                                <h3><t t-esc="program.domain_id.name" /></h3>
                                <t t-set="p" t-value="program.domain_id"/>
                            </t>
                            <div class="thumbnail oe_school_program">
                                <div>
                                    <div class="caption">
                                        <a itemprop="url" t-att-href="'/program/%s' % slug(program)"><t t-esc="program.name" /></a>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </div>
                </div>
            </div>
        </t>
    </template>
    
    <template id="program_details" name="Program Details">
        <t t-call="website.layout">
            <t t-set="title">Program Details</t>
            <div class="oe_structure"/>
            <article class="container oe_school_program_details">
                <section class="row text-center">
                    <h2>Program Details</h2>
                </section>
                <hr/>
                <section class="row">
                    <div class="col-md-4"><h4>PROFIL D’ENSEIGNEMENT</h4></div>
                    <div class="col-md-6"><h4><t t-esc="program.name" /></h4></div>
                    <div class="col-md-2"><h4><t t-esc="program.year_id.name" /></h4></div>
                </section>
                <hr/>
                <section>
                    <div class="row">
                        <div class="col-md-2"><font color="grey">DOMAINE</font></div>
                        <div class="col-md-10"><t t-esc="program.domain_id.name" /></div>
                    </div>
                    <div class="row">
                        <div class="col-md-2"><font color="grey">CYCLE</font></div>
                        <div class="col-md-10"><t t-esc="program.cycle_id.name" /></div>
                    </div>
                    <div class="row">
                        <div class="col-md-2"><font color="grey">SECTION</font></div>
                        <div class="col-md-10"><t t-esc="program.section_id.name" /></div>
                    </div>
                    <div class="row">
                        <div class="col-md-2"><font color="grey">ORIENTATION</font></div>
                        <div class="col-md-10"><t t-esc="program.track_id.name" /></div>
                    </div>
                    <div class="row">
                        <div class="col-md-2"><font color="grey">SPÉCIALITÉ</font></div>
                        <div class="col-md-10"><t t-esc="program.speciality_id.name" /></div>
                    </div>
                </section>
                <hr/>
                <section class="row">
                    <div class="col-md-12"><h4>VADE MECUM</h4></div>
                    <div class="col-md-12" style='white-space: pre-wrap;'><t t-esc="program.description"/></div>
                </section>
                <hr/>
                <section class="row">
                    <div class="col-md-12"><h4>RÉFÉRENTIELS DE COMPÉTENCES ATTENDUES</h4></div>
                    <div class="col-md-12">
                        <table class="table table-striped">
                            <caption>A la fin du cycle, l’étudiant doit être capable :</caption>
                            <col width='50px'/>
                            <col width="100%"/><t t-set="comp_cnt" t-value="0"/>
                            <tr t-foreach="program.competency_ids" t-as="comp"><t t-set="comp_cnt" t-value="comp_cnt+1"/>
                                <th scope="row"><bold><t t-esc="comp_cnt"/></bold></th><td><t t-esc="comp.description"/></td>
                            </tr>
                        </table>
                    </div>
                </section>
                <hr/>
                <section class="row">
                    <div class="col-md-12">
                        <h4>PROGRAMME DES COURS</h4>
                    </div>
                </section>
                <section class="row" t-foreach="program.bloc_ids" t-as="bloc">
                    <t t-call="website_portal_school_management.school_bloc"/>
                </section>
                <hr/>
            </article>
        </t>
    
    </template>
</odoo>