<?xml version="1.0" encoding="utf-8" ?>
<!--
##############################################################################
#
#    Copyright (c) 2015 be-cloud.be
#                       Jerome Sonnet <jerome.sonnet@be-cloud.be>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Affero General Public License as
#    published by the Free Software Foundation, either version 3 of the
#    License, or (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Affero General Public License for more details.
#
#    You should have received a copy of the GNU Affero General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
##############################################################################
-->
<templates>
    <t t-name="MainView">
        <div class="o_school_evaluations">
            <div id="sidebar" class="sidebar" />
            <div id="page-wrapper" style="min-height: 1033px;">
                <div class="o_evaluation_bloc_container" />
            </div>
        </div>
    </t>

    <t t-name="SideBar">
        <a class="oe_logo" href="#">
            <img src='/web/binary/company_logo' />
        </a>
        <div class="navbar-default main_navbar" role="navigation">
            <div class="sidebar-nav navbar-collapse">
                <ul class="nav" id="side-menu">
                    <t t-foreach="groups" t-as="group">
                        <li>
                            <a t-att-data-group-id="group.id" href="#" class="o_school_group_item">
                                <i class="fa fa-users fa-fw"></i>
                                <t t-esc="group.title"/><span class="fa"></span><span class="badge pull-right"><t t-esc="group.blocs.length"/></span>
                            </a>
                        </li>
                    </t>
                    <li class="sidebar-search">
                        <div class="input-group custom-search-form">
                            <input type="text" class="form-control" placeholder="Search..." />
                            <span class="input-group-btn">
                            <button class="btn btn-default" type="button">
                                <i class="fa fa-search"></i>
                            </button>
                        </span>
                        </div>
                        <!-- /input-group -->
                    </li>
                </ul>
            </div>
        </div>
        <div id="sub_sidebar" class="sub_sidebar" />
    </t>

    <t t-name="SubSideBar">
        <div class="navbar-default sub_navbar" role="navigation">
            <div class="sidebar-nav navbar-collapse">
                <ul class="nav" id="side-submenu">
                    <t t-set="is_first" t-value="true" />
                    <t t-foreach="blocs" t-as="bloc">
                        <li>
                            <a t-att-class="'o_school_bloc_item'+ (is_first ? ' active':'')" t-att-data-bloc-id="bloc.id" href="#">
                                <i class="fa fa-user fa-fw"></i><t t-esc="bloc.student"/><span t-att-class="(bloc.state == 'confirmed' ? 'fa pull-right fa-check' : '')"></span>
                            </a>
                        </li>
                        <t t-set="is_first" t-value="false" />
                    </t>
                </ul>
            </div>
        </div>
    </t>

    <t t-name="BlocEditor">
        <div class="container">
            <div class="row bloc_form highlight" t-if="widget.bloc">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="row">
                            <div class="col-md-2">
                                <span class="oe_form_field oe_form_field_image oe_avatar" data-original-title="" title="">
                                                                <img border="1" name="image" t-att-src="widget.student_image" class="img-rounded" style="max-width: 130px; max-height: 130px;"/>
                                                            </span>
                            </div>
                            <div class="col-md-10">
                                <h2><t t-esc="widget.bloc.name"/> - <t t-esc="widget.bloc.source_bloc_name"/></h2>
                                <h3>Crédits acquis : <t t-esc="widget.bloc.totat_acquiered_credits"/></h3>
                            </div>
                        </div>
                    </div>
                    <div class="panel-body">
                        <form>
                            <div class="row" t-if="widget.bloc.totat_acquiered_credits &gt; 59">
                                <div class="col-md-10">
                                    <div class="alert alert-success" role="alert">A obtenu les 60 crédits requis pour l'année en cours.</div>
                                </div>
                                <div class="col-md-2">
                                    <button t-if="widget.bloc.state == 'draft'" type="button" class="btn btn-success dropdown-toggle bloc_confirm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Valider<span class="caret"></span></button>
                                    <button t-if="widget.bloc.state == 'confirmed'" type="button" class="btn btn-success dropdown-toggle disabled" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Validé<span class="caret"></span></button>
                                </div>
                            </div>
                            <div class="row" t-if="(widget.bloc.totat_acquiered_credits &lt; 60) &amp;&amp; (widget.bloc.totat_acquiered_credits &gt; 50)">
                                <div class="col-md-10">
                                    <div class="alert alert-warning" role="alert">A obtenu au moins 50 crédits et peut donc entammer le bloc suivant.</div>
                                </div>
                                <div class="col-md-2">
                                    <button t-if="widget.bloc.state == 'draft'" type="button" class="btn btn-warning dropdown-toggle bloc_confirm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Valider<span class="caret"></span></button>
                                    <button t-if="widget.bloc.state == 'confirmed'" type="button" class="btn btn-warning dropdown-toggle disabled" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Validé<span class="caret"></span></button>
                                </div>
                            </div>
                            <div class="row" t-if="(widget.bloc.totat_acquiered_credits &lt; 50) ">
                                <div class="col-md-10">
                                    <div class="alert alert-danger" role="alert">A obtenu au moins 50 crédits et peut donc entammer le bloc suivant.</div>
                                </div>
                                <div class="col-md-2">
                                    <button t-if="widget.bloc.state == 'draft'" type="button" class="btn btn-danger dropdown-toggle bloc_confirm" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Valider<span class="caret"></span></button>
                                    <button t-if="widget.bloc.state == 'confirmed'" type="button" class="btn btn-danger dropdown-toggle disabled" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">Validé<span class="caret"></span></button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <!-- Table -->
                    <table class="table-condensed table-striped" style="font-size:130%;">
                        <colgroup>
                            <col style="width:50px"/>
                            <col style="width:1000px"/>
                            <col style="width:200px"/>
                            <col style="width:200px"/>
                        </colgroup>
                        <thead>
                            <tr>
                                <th class="text-center">#</th>
                                <th>Intitulé</th>
                                <th>Résultat</th>
                                <th>Acquis</th>
                            </tr>
                        </thead>
                        <tbody>
                            <t t-set="counter" t-value="1"/>
                            <t t-foreach="widget.course_groups" t-as="course_group">
                            <tr>
                                <th scope="row" class="text-center"><t t-esc="counter"/></th>
                                <td><t t-esc="course_group.name"/></td>
                                <td><t t-esc="course_group.final_result"/></td>
                                <td>
                                    <span class="label label-success" t-if="course_group.acquiered === 'A'">Acquis</span>
                                    <span class="label label-warning" t-if="course_group.acquiered === 'NA'">Non-Acquis</span>
                                </td>
                            </tr>
                            <t t-set="counter" t-value="counter + 1"/>
                            <t t-foreach="course_group.courses" t-if="course_group.courses.length &gt; 1" t-as="course">
                                <tr style="font-style: italic;">
                                    <th scope="row" class="text-center"></th>
                                    <td><t t-esc="course.name"/></td>
                                    <td><t t-esc="course.final_result"/></td>
                                    <td></td>
                                </tr>
                            </t>
                            </t>
                        </tbody>
                    </table>

                </div>
            </div>
        </div>
    </t>

</templates>