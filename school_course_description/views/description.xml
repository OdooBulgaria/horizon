<?xml version="1.0" encoding="utf-8" ?>
<!--
##############################################################################
#
#    Copyright (c) 2015 be-cloud.be
#                       Jerome Sonnet <jerome.sonnet@be-cloud.be>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Affero General Public License as
#    published by the Free Software Foundation, either version 3 of the
#    License, or (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Affero General Public License for more details.
#
#    You should have received a copy of the GNU Affero General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
##############################################################################
-->
<openerp>
    <data>
        <!-- Course Documentation List View -->
        <record id="view_course_documentation_list" model="ir.ui.view">
            <field name="name">school.course_documentation.tree</field>
            <field name="model">school.course_documentation</field>
            <field eval="8" name="priority" />
            <field name="arch" type="xml">
                <tree string="Course Documentation">
                    <field name="course_id" string="Course"/>
                    <field name="author_id"/>
                    <field name="state" />
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="course_documentation_form">
            <field name="name">school.course_documentation.view</field>
            <field name="model">school.course_documentation</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Course" create="0">
                    <script>
                      // TODO : Hack as summernote seem to focus at the end
                      $(function(){ //wait for document ready
                      
                        setTimeout(function(){
                          $(".oe_form_required")[0].focus();
                        }, 100) //execute your function after 2 seconds.
                      
                      });
                    </script>
                    <header groups="school_management.group_employee">
        	            <button name="publish" type="object" states="draft" string="Publish" class="oe_highlight" groups="school_management.group_employee"/>
                        <button name="unpublish" type="object" states="published,archived" string="Reset to Draft" groups="school_management.group_employee"/>
                        <button name="archive" type="object" states="published" string="Archive" groups="school_management.group_employee"/>
        	            <field name="state" widget="statusbar" statusbar_visible="draft,published,archived"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                          <h1>
                            Course Description - <field name="course_id" class="oe_inline" style="width: 800px !important;"/>
                          </h1>
                          <h3 class="oe_fade">
                            by <field name="author_id" class="oe_inline" readonly="1"/>
                          </h3>
                        </div>
                        <div style="font-size:x-small;">
                          <p>
                          La mise à disposition aux étudiants des descriptifs est une obligation légale du décret « paysage ».
                          </p>
                          <p>
                          Le descriptif d'unité d'enseignement est en réalité la forme officielle, mais celui-ci n'est en fait que la somme des descriptifs d'activités d'apprentissage qui le composent. Il existe cependant un responsable unique pour chaque unité d'enseignement. La liste de ces responsables d'unités a été validée en CGP et sera publiée dans le Règlement des Études.
                          Toutes les activités d'apprentissage du programme (1er et 2ème cycle) doivent présenter un descriptif en bonne et due forme pour chaque année, même les cours à choix ! Ces descriptifs doivent correspondre fidèlement aux profils d'enseignement mis en ligne sur le site internet du conservatoire.
                          </p>                          
                          <p>
                          La finalisation des descriptifs est attendue pour le 28 août 2017, à fin de publication sur le site internet du CrLg pour le 15 septembre. A cette date, ces documents deviennent les références légales pour chaque programme de cours de chaque étudiant.
                          </p>                          
                          <p>
                          En principe, toutes les activités doivent s'organiser sur un seul quadrimestre. Il existe cependant une liste d'exemptions que l'on retrouve dans le vade-mecum du ComDel (http://www.comdel.be/wp-content/uploads/2017/03/VDM-Paysage_mars2017.pdf , Article 79, pages 115-116). Ainsi, nous profitons de la dérogation ouverte en premier cycle pour organiser l'ensemble des activités sous un mode annuel, avec une forte incitation à organiser une évaluation partielle en session de janvier. La liste des exemptions pour le second cycle (master) est plus limitée : « activités d’apprentissage qui, par leur nature, échappent à la quadrimestrialisation : évaluations, stages, activités d’intégration professionnelle, projets tels que le mémoire, le travail de fin d’études, le cours artistique principal, etc  ». A moins de remettre au CGP une raison valable attestant de l'impossibilité de quadrimestrialiser une activité sortant de cette liste, nous demandons aux pédagogues responsables de fonctionner sur cette règle quadrimestrielle.
                          </p>                          
                          <p>
                          Le référentiel de compétences officiel de 2ème cycle (liste des acquis d'apprentissage terminaux de master) n'est toujours pas officialisé par le conseil d'administration de l'ARES. En réalité, la procédure de validation vient seulement d'être votée par l'ARES ce 27 juin dernier ! Un référentiel commun entre domaines musique des différentes ESA de la communauté française a été réalisé et avalisé par les directions respectives. A défaut de document officiel, nous vous proposons de conserver le pré-projet réalisé l'année passée.
                          </p>
                        </div>
                        <group col="4">
                          <field name="cycle_id" readonly="1" colspan="4"/>
                          <field name="course_group_id" readonly="1"/>
                          <field name="level" readonly="1"/>
                          <field name="credits" readonly="1"/>
                          <field name="hours" readonly="1"/>
                          <field name="weight" readonly="1"/>
                          <field name="mandatory" />
                          <newline/>
                          <field name="language"/>
                          <newline/>
                          <field name="staff_ids" colspan="4" widget="many2many_tags"/>
                        </group>
                        <div class="panel panel-default">
                          <div class="panel-heading">
                            <h3 class="panel-title">Schedule</h3>
                          </div>
                          <div class="panel-body">
                            <div>
                            Ce volet comporte une modification importante depuis la mise en application du décret paysage. La notion de «cours» n'apparaît plus en tant que telle dans le décret paysage (ce qui ne signifie cependant pas pour autant qu'elle disparaisse) au profit de la notion plus large d'«activité d'apprentissage»(article 76) :
                            «Les activités d'apprentissage comportent :
                            1° des enseignements organisés par l'établissement, notamment des cours magistraux, exercices dirigés, travaux pratiques, travaux de laboratoire, séminaires, exercices de création et recherche en atelier, excursions, visites et stages;
                            2° des activités individuelles ou en groupe, notamment des préparations, travaux, recherches d'information, travaux de fin d'études, projets et activités d'intégration professionnelle;
                            3° des activités d'étude, d'autoformation et d'enrichissement personnel ;
                            4° des acquisitions de compétences en entreprise dans le cadre de l'enseignement en alternance.
                            <p>
                            Toutes peuvent faire l'objet d'une évaluation et peuvent être exprimées en termes de crédits.»
                            </p>
                            Il sera donc indiqué dans le volume horaire:
                            <ul>
                                <li>le nombre d'heures de cours (le minimum est défini par l'arrêté du 17/07/2002 disponible ici:http://www.gallilex.cfwb.be/document/pdf/27034_003.pdf ),</li>
                                <li>le nombre d'heures de travaux dirigés, répétitions, master-classes, séminaires, visites, ...</li>
                                <li>le nombre d'heures de stages,</li>
                                <li>le nombre d'heures d'évaluation.</li>
                                <li>Le solde par rapport à l'investissement de temps de travail complet de l'étudiant défini par le nombre de crédits associé sera le temps moyen de travail personnel de l'étudiant.</li>
                            </ul>
                            
                            <h4>Exemples:</h4>
                            volume horairede l'AA «banjo»:
                            <ul>
                                <li>60 heures de cours individuel,</li>
                                <li>2 heures d'auditions et d'évaluations,</li>
                                <li>30 heures de travail de groupe,</li>
                                <li>10 heures de master-classes.</li>
                            </ul>
                            volume horaire de l'AA d'«écoute critique de la discographie consacrée au banjo» :
                            <ul>
                                <li>15 heures de cours collectif,</li>
                                <li>2 heures d'examen.</li>
                            </ul>
                            <p>
                            Le volume horaire total doit correspondre à celui indiqué dans le profil d'enseignement correspondant.
                            </p>
                            Note: certains pédagogues préfèrent fournir une description moins précise ou moins contraignante en terme d'heures destinées à chaque type d'enseignement. A partir du moment ou la description est suffisamment compréhensible pour l'étudiant, cela reste admissible.
                            Exemple: «volume horaire: 100 heures. En moyenne, un cours individuel est dispensé par semaine par le professeur responsable de l'activité; le solde des heures se répartit entre cours collectifs, présence au cours individuel d'autres étudiants, auditions et master-classes».
                            </div>
                            <group col="4">
                              <field name="schedule" />
                            </group>
                            <field name="schedule_text" widget="html"/>
                          </div>
                        </div>
                        <div class="panel panel-default">
                          <div class="panel-heading">
                            <h3 class="panel-title">Content</h3>
                          </div>
                          <div class="panel-body">
                            <field name="content" widget="html"/>
                          </div>
                        </div>
                        <div class="panel panel-default">
                          <div class="panel-heading">
                            <h3 class="panel-title">Method</h3>
                          </div>
                          <div class="panel-body">
                            <field name="method" widget="html"/>
                          </div>
                        </div>
                        <div class="panel panel-default">
                          <div class="panel-heading">
                            <h3 class="panel-title">Learning outcomes</h3>
                          </div>
                          <div class="panel-body">
                            <field name="learning_outcomes" widget="html"/>
                          </div>
                        </div>
                        <div class="panel panel-default">
                          <div class="panel-heading">
                            <h3 class="panel-title">References</h3>
                          </div>
                          <div class="panel-body">
                            <field name="references" widget="html"/>
                          </div>
                        </div>
                        <div class="panel panel-default">
                          <div class="panel-heading">
                            <h3 class="panel-title">Evaluation method</h3>
                          </div>
                          <div class="panel-body">
                            <field name="evaluation_method" widget="html"/>
                          </div>
                        </div>
                    </sheet>
                </form>
            </field>
        </record>
        
        <record id="action_course_documentation_list" model="ir.actions.act_window">
            <field name="name">Course Documentation</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">school.course_documentation</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        
        <record id="action_course_documentation_tree_view1" model="ir.actions.act_window.view">
            <field name="sequence" eval="1" />
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_course_documentation_list" />
            <field name="act_window_id" ref="action_course_documentation_list" />
        </record>
        
        <!-- Top menu item -->
        <menuitem name="Course Description" id="menu_course_description" icon="fa-book" web_icon="note,static/description/icon.png" sequence="61" groups="school_management.group_program_management,school_evaluations.group_evaluations,school_management.group_teacher"/>

        <menuitem id="menu_course_documentation_list" parent="school_course_description.menu_course_description" action="action_course_documentation_list" sequence="10" />
        
        <record id="action_new_course_documentation" model="ir.actions.act_window">
            <field name="name">New Course Documentation</field>
            <field name="res_model">school.course_documentation</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="course_documentation_form"/>
            <field name="context">{'default_course_id': context.get('active_id', False)}</field>
        </record>
        
        <!-- Add evaluation to Individual Course form view -->
        <record id="course_doc_form" model="ir.ui.view">
            <field name="name">school.course.doc.view</field>
            <field name="model">school.course</field>
            <field name="inherit_id" ref="school_management.course_form" />
            <field eval="25" name="priority" />
            <field name="arch" type="xml">
                <xpath expr="//sheet" position="before">
                    <header>
                        <button type="action" 
                            name="%(action_new_course_documentation)d" string="Add doc" >
                        </button>
                    </header>
                </xpath>
            </field>
        </record>
        
    </data>
</openerp>